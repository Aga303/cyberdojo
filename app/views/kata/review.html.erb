
<script language="javascript" type="text/javascript"><!--

$j(document).ready(function() {
  rebuildFilenameList();
  createLineNumbersForEditor();
  loadFile("<%=@current_file-%>");
});

//--></script>

<table>
  <tr valign="top">
    <td>
      <%= render :partial => 'info_panel' -%>
      
      <div class="panel">
        <table>
          <tr>
            <td>
              <table>
                <tr>
                
                  <% if @traffic_lights_to_tag.length != 0 -%>
                  <td>
                    <%= link_to "0", 
                    { :controller => :kata, 
                      :action => :review,
                      :dojo_name => "#{@dojo.name}",
                      :avatar => "#{@avatar.name}",
                      :tag => "0" }, 
                    { :class => "title" } -%>
                  </td>                
                  <% end -%>
                  
                  <td>
                    <%= render :partial => 'prev_increment_button' -%>
                  </td>
                  
                  <td>
                    <% if @traffic_lights_to_tag.length != 0-%>
                      <%= traffic_light(@dojo.name, @avatar.name, @traffic_lights_to_tag.last) -%>
                    <% end -%>
                  </td>
                  
                  <td>
                    <span class="traffic_light_number">
                       <%= @traffic_lights_to_tag.length -%>
                    </span>
                  </td>   
                  
                  <td>
                    <%= render :partial => 'next_increment_button' -%>                      
                  </td>
                  
                  <% if @traffic_lights_to_tag.length < @all_traffic_lights.length -%>
                  <td>
                    <%= link_to "#{@all_traffic_lights.length}", 
                    { :controller => :kata, 
                      :action => :review,
                      :dojo_name => "#{@dojo.name}",
                      :avatar => "#{@avatar.name}",
                      :tag => "#{@all_traffic_lights.length}" }, 
                    { :class => "title" } -%>
                  </td>                
                  <% end -%>
                </tr>
              </table>
            </td>
          </tr>
        </table>      
      </div>
      
      <div class="panel">
        <%= render :partial => 'filenames' -%>
      </div>
      
    </td>
    
    <td>
      <div style="width:42em;">
        <%= render :partial => 'editor' -%>
        <%= render :partial => 'output' -%>
      </div>
    </td>
  </tr>

</table>

<%= render :partial => 'hidden_file_contents' -%>

  

