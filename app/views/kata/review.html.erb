
<script language="javascript" type="text/javascript"><!--

$j(document).ready(function() {
  rebuildFilenameList();
  createLineNumbersFor('editor');
  loadFile("<%=@current_file-%>");
});

//--></script>

<table>
  <tr valign="top">
    <td>
      <div class="panel">
        <%= link_to "#{@dojo.name}", 
             { :controller => :dojo, :action => :dashboard, :dojo_name => "#{@dojo.name}" }, 
             { :class => "title", :target => "_blank" } -%>
        <div>
          <%= avatar_image(@avatar.name, 65) -%>
        </div>
 
        <span class="small_title"><%= @kata.language -%></span>
        <span class="small_title"><%= @kata.name -%></span>
      </div>
           
      <div class="panel">
        <%= render :partial => 'filenames' -%>
      </div>
      
      <div class="panel">
        <table>
          <tr>
            <td>
              <table>
                <tr>
                  <td>
                    <%= render :partial => 'prev_increment_button' -%>
                  </td>                
                  <td>
                    <% if @increments.length != 0 -%>
                      <%= traffic_light(@dojo.name, @avatar.name, @increments.last) -%>
                    <% end -%>
                  </td>
                  <td>
                    <span id="increment_number"><%= @increments.length.to_s -%></span>
                  </td>                
                  <td>
                    <%= render :partial => 'next_increment_button' -%>                      
                  </td>
                </tr>
              </table>
            </td>
          </tr>
        </table>      
      </div> 
    </td>
    
    <td>
      <div style="width:42em;">
        <%= render :partial => 'editor' -%>
        <%= render :partial => 'output' -%>
      </div>
    </td>
  </tr>

</table>

<%= render :partial => 'hidden_file_contents' -%>

  

