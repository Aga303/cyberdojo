 
<div id="traffic_lights" class="panel" style="width:90em;overflow:auto">
  <table>
  
    <% index = 0 -%>
    <% @dojo.all_increments.each do |avatar_name,incs| -%>
      <% parity = (index % 2 == 0) ? "even" : "odd" -%>
      <% index += 1 -%>
      <tr class="<%=parity-%> traffic_light_row">
        <td>
          <%= avatar_image(avatar_name, 45) -%>
        </td>
        
        <td>
          <span class="small_title"><%= avatar_name.humanize -%></span>        
          <% avatar = Avatar.new(@dojo, avatar_name) -%> 
          <% kata = avatar.kata -%>
          <% if @languages.length != 1 -%> <span class="small_title"><%= kata.language -%></span> <% end -%> 
          <% if @katas.length != 1 -%> <span class="small_title"><%= kata.name -%></span> <% end -%>      
        </td>
      
        <td>
          <table>
            <tr>
              <% incs.each do |inc| -%>
                <td>
                  <%= traffic_light(@dojo.name, avatar_name, inc) -%>
                </td>
              <% end -%>
            </tr>
          </table>
        </td>
      
      </tr>    
    <% end -%>
  
  </table>
</div>

